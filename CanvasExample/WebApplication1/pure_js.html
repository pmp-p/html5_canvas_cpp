<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JS Canvas App</title>
    <script src="modernizr-canvas.js"></script>
    <script type="text/javascript">
        window.addEventListener("load", eventWindowLoaded, false);

        function eventWindowLoaded() {
            canvasApp();
        }

		function displayText()
		{
            var theCanvas = document.getElementById("canvas");
            var ctx = theCanvas.getContext("2d");

			ctx.font = "20px Georgia";
			ctx.fillText("Hello World!", 10, 50);
			
			ctx.font = "30px Verdana";
			
			// Create gradient
			var gradient = ctx.createLinearGradient(0, 0, 320, 0);
			gradient.addColorStop(0.0," magenta");
			gradient.addColorStop(0.5, "blue");
			gradient.addColorStop(1.0, "red");
			// Fill with gradient
			ctx.fillStyle = gradient;
			ctx.fillText("Big smile!", 10, 90);
		}
		function displayTextOutline()
		{
            var theCanvas = document.getElementById("canvas");
            var ctx = theCanvas.getContext("2d");

			ctx.font = "20px Georgia";
			ctx.strokeText("Hello World!", 10, 50);
			
			ctx.font = "30px Verdana";
			
			// Create gradient
			var gradient = ctx.createLinearGradient(0, 0, 320, 0);
			gradient.addColorStop(0.0," magenta");
			gradient.addColorStop(0.5, "blue");
			gradient.addColorStop(1.0, "red");
			// Fill with gradient
			ctx.strokeStyle = gradient;
			ctx.strokeText("Big smile!", 10, 90);
		}
		function displayImage()
		{
            var theCanvas = document.getElementById("canvas");
            var ctx = theCanvas.getContext("2d");

			var img = document.getElementById("yes_image");
			ctx.drawImage(img, 10, 10);
        }
        function drawLine() {
            var theCanvas = document.getElementById("canvas");
            var ctx = theCanvas.getContext("2d");

            ctx.beginPath();
            ctx.lineWidth = 10.0;
            ctx.lineCap = "round";
            ctx.moveTo(20, 20);
            ctx.lineTo(200, 20);
            ctx.stroke();
        }
        function drawBezier() {
            var theCanvas = document.getElementById("canvas");
            var ctx = theCanvas.getContext("2d");

            ctx.beginPath();
            ctx.moveTo(20, 20);
            ctx.bezierCurveTo(20, 100, 200, 100, 200, 20);
            ctx.stroke();
        }
        function drawQuadraticCurve() {
            var theCanvas = document.getElementById("canvas");
            var ctx = theCanvas.getContext("2d");

            ctx.beginPath();
            ctx.moveTo(20, 20);
            ctx.quadraticCurveTo(20, 100, 200, 20);
            ctx.stroke();
        }
        function clearRect() {
            var theCanvas = document.getElementById("canvas");
            var ctx = theCanvas.getContext("2d");

	        var grad = ctx.createLinearGradient(0.0, 0.0, 320.0, 0.0);
	        grad.addColorStop(0.0, "#ff0000");
	        grad.addColorStop(1.0, "#0000ff");
	        ctx.fillStyle = grad;
	        ctx.fillRect(0.0, 0.0, 320.0, 280.0);

	        ctx.clearRect(100, 100, 50, 50);
        }
        function rotateRect() {
            var theCanvas = document.getElementById("canvas");
            var ctx = theCanvas.getContext("2d");

            ctx.rotate(20 * Math.PI / 180);
            ctx.fillRect(50, 20, 100, 50);
        }
        function saveRestore() {
            var theCanvas = document.getElementById("canvas");
            var ctx = theCanvas.getContext("2d");
            ctx.save();

            ctx.rotate(20 * Math.PI / 180);
            ctx.fillRect(50, 20, 100, 50);

            ctx.restore();
            ctx.fillRect(50, 20, 100, 50);
        }
        function repeatPattern() {
            var theCanvas = document.getElementById("canvas");
            var ctx = theCanvas.getContext("2d");

            var img = document.getElementById("lamp");
            var pat = ctx.createPattern(img, "repeat");
            ctx.rect(0, 0, 150, 100);
            ctx.fillStyle = pat;
            ctx.fill();
        }
        function compositeOp() {
            var theCanvas = document.getElementById("canvas");
            var ctx = theCanvas.getContext("2d");

            ctx.fillStyle = "red";
            ctx.fillRect(20, 20, 75, 50);
            ctx.globalCompositeOperation = "source-over";
            ctx.fillStyle = "blue";
            ctx.fillRect(50, 50, 75, 50);

            ctx.fillStyle = "red";
            ctx.fillRect(150, 20, 75, 50);
            ctx.globalCompositeOperation = "destination-over";
            ctx.fillStyle = "blue";
            ctx.fillRect(180, 50, 75, 50);
        }

        function canvasApp() {
            if (!Modernizr.canvas) {
                return;
            }
			//displayText();
			//displayTextOutline();
			//displayImage();
            //drawLine();
            //drawBezier();
            //drawQuadraticCurve();
            //clearRect();
            //rotateRect();
            //saveRestore();
            //repeatPattern();
            compositeOp();
        }
    </script>
</head>
<body>
    <div style="position: absolute; top: 0px; left: 0px;">
        <canvas id="canvas" width="320" height="280"> Your browser does not support HTML5 Canvas. </canvas>
    </div>
    <div style="display: none;"><img src="yes.jpg" id="yes_image"></div>
    <div style="display: none;"><img src="img_lamp.jpg" id="lamp"></div>
</body>
</html>

